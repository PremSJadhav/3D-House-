<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Editable House Model</title>
  <style>body { margin: 0; overflow: hidden; }</style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r146/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/TransformControls.js"></script>
  <script>
    // scene, camera, renderer
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xf0f0f0);
    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 1, 1000);
    camera.position.set(100, 150, 200);

    const renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // lights
    const ambient = new THREE.AmbientLight(0x606060);
    scene.add(ambient);
    const directional = new THREE.DirectionalLight(0xffffff);
    directional.position.set(1, 0.75, 0.5).normalize();
    scene.add(directional);

    // controls
    const orbit = new THREE.OrbitControls(camera, renderer.domElement);

    // scale factor: 1 foot = 10 units
    const ft = 10;

    // draw floor plane
    const floorGeo = new THREE.PlaneGeometry(57 * ft, 35 * ft);
    const floorMat = new THREE.MeshBasicMaterial({color: 0xeeeeee, side: THREE.DoubleSide});
    const floor = new THREE.Mesh(floorGeo, floorMat);
    floor.rotation.x = -Math.PI/2;
    scene.add(floor);

    // helper function to add wall
    function addWall(x, y, z, length, height, thickness) {
      const geo = new THREE.BoxGeometry(length * ft, height * ft, thickness * ft);
      const mat = new THREE.MeshLambertMaterial({color: 0x888888});
      const mesh = new THREE.Mesh(geo, mat);
      mesh.position.set(x * ft, (height/2) * ft, z * ft);
      scene.add(mesh);
      return mesh;
    }

    // Sample walls (rectangle boundary)
    const perimeter = [];
    perimeter.push(addWall(0, 0, -17.5, 57, 10, 0.5)); // back
    perimeter.push(addWall(0, 0, 17.5, 57, 10, 0.5));  // front
    perimeter.push(addWall(-28.5, 0, 0, 0.5, 10, 35)); // left
    perimeter.push(addWall(28.5, 0, 0, 0.5, 10, 35));  // right

    // transform controls for editing
    const transform = new THREE.TransformControls(camera, renderer.domElement);
    scene.add(transform);
    // attach first wall for demo
    transform.attach(perimeter[0]);

    window.addEventListener('keydown', function(event) {
      switch(event.key) {
        case 'g': transform.setMode('translate'); break;
        case 'r': transform.setMode('rotate');    break;
        case 's': transform.setMode('scale');     break;
      }
    });

    // resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // render loop
    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }
    animate();
  </script>
</body>
  </html>
    
